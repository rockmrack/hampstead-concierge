{
  "name": "Hampstead Receptionist - Sarah v5.0 COMPLETE",
  "description": "Full-featured AI receptionist with SMS confirmations, after-hours handling, multi-language support, and UK compliance",
  "version": "5.0.0",
  "codename": "COMPLETE",
  "region": "eu-west-1",
  
  "model": {
    "provider": "openai",
    "model": "gpt-4o-mini",
    "fallbackModels": ["gpt-4o", "gpt-3.5-turbo"],
    "temperature": 0.5,
    "maxTokens": 220,
    "topP": 0.92,
    "frequencyPenalty": 0.4,
    "presencePenalty": 0.2,
    
    "semanticCachingEnabled": true,
    "numFastTurns": 5,
    "emotionRecognitionEnabled": true,
    
    "qualityEnhancements": {
      "conversationalTone": {
        "enabled": true,
        "style": "warm_professional_british",
        "useContractions": true,
        "ukEnglish": true,
        "avoidAmericanisms": [
          "gotten", "apartment", "cell phone", "trash", "elevator",
          "sidewalk", "vacation", "gas", "check", "color"
        ],
        "preferBritishTerms": {
          "apartment": "flat",
          "cell phone": "mobile",
          "trash": "rubbish",
          "elevator": "lift",
          "sidewalk": "pavement",
          "vacation": "holiday",
          "gas": "petrol",
          "check": "cheque",
          "color": "colour"
        }
      },
      
      "empathyEngine": {
        "enabled": true,
        "emotionResponses": {
          "excited": {
            "detect": ["can't wait", "so excited", "finally", "dream", "brilliant", "lovely"],
            "respond": "enthusiasm_match",
            "phrases": ["That sounds wonderful!", "How exciting!", "Ross loves these projects!", "Brilliant!"]
          },
          "stressed": {
            "detect": ["worried", "stressed", "nightmare", "disaster", "help", "desperate"],
            "respond": "reassurance",
            "phrases": ["I completely understand", "Let's get this sorted", "Ross will help", "Don't worry"]
          },
          "frustrated": {
            "detect": ["already told", "again", "third time", "nobody", "useless"],
            "respond": "validation",
            "phrases": ["I'm so sorry to hear that", "Let me make sure Ross calls you personally", "I do apologise"]
          },
          "uncertain": {
            "detect": ["not sure", "don't know", "maybe", "possibly", "reckon"],
            "respond": "guidance",
            "phrases": ["No problem at all", "Ross can advise", "He'll talk through options with you"]
          }
        }
      },
      
      "contextMemory": {
        "enabled": true,
        "rememberWithinCall": ["caller_name", "mentioned_details", "emotional_state", "language_preference"],
        "preventRepetition": true
      },
      
      "responseVariation": {
        "enabled": true,
        "avoidRepeating": true,
        "ukSynonymGroups": {
          "confirmation": ["Lovely", "Perfect", "Wonderful", "Brilliant", "Excellent", "Splendid"],
          "understanding": ["I understand", "I see", "Of course", "Absolutely", "Quite right"],
          "thanks": ["Thank you", "Thanks ever so much", "That's helpful", "Cheers", "Ta"]
        }
      }
    },
    
    "languageDetection": {
      "enabled": true,
      "supportedLanguages": ["en-GB", "pl", "es", "pt"],
      "defaultLanguage": "en-GB",
      "onNonEnglishDetected": {
        "action": "acknowledge_and_proceed",
        "englishFallback": true
      }
    },

    "afterHoursMode": {
      "enabled": true,
      "timezone": "Europe/London",
      "businessHours": {
        "monday": {"start": "08:00", "end": "18:00"},
        "tuesday": {"start": "08:00", "end": "18:00"},
        "wednesday": {"start": "08:00", "end": "18:00"},
        "thursday": {"start": "08:00", "end": "18:00"},
        "friday": {"start": "08:00", "end": "18:00"},
        "saturday": {"start": "09:00", "end": "14:00"},
        "sunday": "closed"
      },
      "ukBankHolidays2025": [
        "2025-01-01", "2025-04-18", "2025-04-21", "2025-05-05", 
        "2025-05-26", "2025-08-25", "2025-12-25", "2025-12-26"
      ],
      "afterHoursGreeting": "Good evening, you've reached Hampstead Renovations. Our office hours are Monday to Friday, 8am to 6pm, and Saturday mornings. I'm Sarah, Ross's assistant, and I can still take your details now so he can call you first thing.",
      "emergencyOverride": true
    },
    
    "intentClassifier": {
      "enabled": true,
      "model": "enhanced",
      "intents": [
        "greeting", "provide_name", "provide_phone", "provide_address",
        "describe_project", "ask_renovation", "ask_maintenance", "report_emergency",
        "express_concern", "ask_price", "ask_availability", "ask_timeline",
        "mention_budget", "mention_previous_work", "complaint", "spam", 
        "confusion", "gratitude", "goodbye", "non_english", "request_callback"
      ],
      "confidenceThreshold": 0.82
    },
    
    "entityExtractor": {
      "enabled": true,
      "entities": [
        {"type": "PERSON", "field": "caller_name", "validation": "non_empty"},
        {"type": "PHONE", "field": "phone_number", "format": "uk_mobile", "pattern": "^(\\+44|0)7[0-9]{9}$"},
        {"type": "PHONE_LANDLINE", "field": "landline", "format": "uk_landline", "pattern": "^(\\+44|0)[1-9][0-9]{8,9}$"},
        {"type": "ADDRESS", "field": "address", "requireStreet": true},
        {"type": "POSTCODE", "field": "postcode", "pattern": "^[A-Z]{1,2}[0-9R][0-9A-Z]?\\s?[0-9][A-Z]{2}$"},
        {"type": "PROJECT", "field": "project_type", "categories": 20},
        {"type": "MONEY", "field": "budget_hint", "currency": "GBP", "symbol": "£"},
        {"type": "DATE", "field": "timeline_hint", "format": "uk_date"},
        {"type": "EMOTION", "field": "caller_mood"}
      ]
    }
  },

  "voice": {
    "provider": "elevenlabs",
    "voiceId": "EXAVITQu4vr4xnSDxMaL",
    "model": "eleven_turbo_v2_5",
    "stability": 0.55,
    "similarityBoost": 0.80,
    "style": 0.15,
    "useSpeakerBoost": true,
    "optimizeStreamingLatency": 3,
    
    "accent": "british_rp",
    "pronunciation": {
      "style": "british",
      "rules": [
        {"word": "schedule", "pronounce": "SHED-yool"},
        {"word": "aluminium", "pronounce": "al-yoo-MIN-ee-um"},
        {"word": "privacy", "pronounce": "PRIV-uh-see"},
        {"word": "garage", "pronounce": "GAR-ahzh"},
        {"word": "mobile", "pronounce": "MOH-byle"}
      ]
    },
    
    "chunkPlan": {
      "enabled": true,
      "minCharacters": 12,
      "punctuationBoundaries": [".", "!", "?", ",", ";", ":", "—", "..."],
      "formatPlan": {
        "enabled": true,
        "numberToDigitsCutoff": 2030,
        "currencyFormat": "british",
        "dateFormat": "british"
      }
    },
    
    "inputPreprocessing": {
      "enabled": true,
      "rules": [
        {"pattern": "£([0-9,]+)", "replacement": "$1 pounds"},
        {"pattern": "(\\d{2})/(\\d{2})/(\\d{4})", "replacement": "$1 $2 $3", "context": "date"},
        {"pattern": "(\\d)(\\d)(\\d)(\\d)", "replacement": "$1 $2 $3 $4", "context": "phone"},
        {"pattern": "NW(\\d+)", "replacement": "N W $1"},
        {"pattern": "([A-Z]{1,2}\\d+)\\s*(\\d[A-Z]{2})", "replacement": "$1, $2", "context": "postcode"}
      ]
    },
    
    "fallbackPlan": {
      "voices": [
        {"provider": "deepgram", "voiceId": "aura-athena-en", "quality": "high"},
        {"provider": "openai", "voiceId": "nova", "quality": "high"}
      ]
    },
    
    "prosodyControl": {
      "enabled": true,
      "rules": [
        {"context": "phone_readback", "rate": "0.85", "pitch": "+3%", "pause_after": "300ms"},
        {"context": "name_use", "rate": "0.95", "emphasis": "moderate"},
        {"context": "reassurance", "rate": "0.9", "pitch": "-5%", "warmth": "high"},
        {"context": "after_hours", "rate": "0.95", "warmth": "high"},
        {"context": "emergency", "rate": "1.05", "pitch": "+2%"}
      ]
    }
  },

  "transcriber": {
    "provider": "deepgram",
    "model": "nova-2",
    "language": "en-GB",
    "smartFormat": true,
    "punctuate": true,
    "profanityFilter": false,
    "diarize": false,
    "alternatives": 3,
    "endpointing": 280,
    "interimResults": true,
    "utteranceEndMs": 900,
    "vadEvents": true,
    
    "multiLanguageSupport": {
      "enabled": true,
      "detectLanguage": true,
      "supportedLanguages": ["en-GB", "en", "pl", "es", "pt"],
      "defaultLanguage": "en-GB"
    },
    
    "ukAccentOptimization": {
      "enabled": true,
      "accents": ["received_pronunciation", "estuary", "cockney", "multicultural_london"],
      "adaptiveMode": true
    },
    
    "wordBoost": {
      "enabled": true,
      "intensifier": 2.5,
      "words": [
        "Hampstead", "Belsize", "Swiss Cottage", "Primrose Hill", "St John's Wood",
        "Highgate", "Kentish Town", "Camden", "Kilburn", "West Hampstead",
        "Golders Green", "Finchley", "Muswell Hill", "Crouch End", "Archway",
        "NW3", "NW6", "NW8", "NW11", "NW1", "NW2", "NW5", "N2", "N6", "N19",
        "Finchley Road", "Haverstock Hill", "Heath Street", "Flask Walk",
        "Arkwright Road", "Belsize Park", "England's Lane", "South End Green",
        "renovation", "extension", "loft", "basement", "refurbishment", "conversion",
        "kitchen", "bathroom", "boiler", "plumbing", "electrics", "rewire",
        "leak", "emergency", "urgent", "flooding", "burst", "damp",
        "Ross", "Sarah", "Hampstead Renovations",
        "architect", "planning", "party wall", "building control", "structural",
        "terraced", "semi-detached", "detached", "maisonette", "flat", "mansion block",
        "Victorian", "Edwardian", "Georgian", "period property",
        "oh seven", "zero seven", "double", "triple",
        "quid", "grand", "pounds"
      ]
    },
    
    "customVocabulary": {
      "enabled": true,
      "phrases": [
        {"phrase": "Hampstead Renovations", "boost": 10},
        {"phrase": "loft conversion", "boost": 9},
        {"phrase": "rear extension", "boost": 9},
        {"phrase": "side return extension", "boost": 9},
        {"phrase": "basement dig out", "boost": 8},
        {"phrase": "party wall agreement", "boost": 8},
        {"phrase": "planning permission", "boost": 8},
        {"phrase": "building regulations", "boost": 8},
        {"phrase": "building control", "boost": 8},
        {"phrase": "period property", "boost": 7},
        {"phrase": "conservation area", "boost": 8},
        {"phrase": "listed building", "boost": 8},
        {"phrase": "permitted development", "boost": 7},
        {"phrase": "oh seven", "boost": 9},
        {"phrase": "zero seven", "boost": 9}
      ]
    }
  },

  "conversationFlow": {
    "stateManagement": {
      "enabled": true,
      "states": [
        "greeting", "after_hours_greeting", "language_detection",
        "initial_listen", "understanding_need",
        "collecting_name", "collecting_phone", "confirming_phone",
        "collecting_address", "clarifying_details",
        "categorizing", "empathizing", "reassuring",
        "summarizing", "confirming", "offering_sms",
        "closing", "terminated"
      ]
    },
    
    "smsConfirmation": {
      "enabled": true,
      "offerToSend": true,
      "defaultOffer": true,
      "script": "I can send you a text confirming this call and when to expect Ross's callback. Would that be helpful?"
    },
    
    "afterHoursFlow": {
      "enabled": true,
      "emergencyOverride": {
        "keywords": ["emergency", "flooding", "burst", "gas", "fire", "urgent", "dangerous"],
        "action": "treat_as_urgent"
      },
      "nonEmergencyFlow": {
        "collectDetails": true,
        "promiseCallback": "first thing tomorrow morning",
        "offerSMS": true
      }
    },
    
    "qualityGates": {
      "beforeClosing": {
        "required": ["caller_name", "phone_number_confirmed", "category", "need_understood"],
        "recommended": ["address", "postcode", "timeline"],
        "offerSMS": true
      }
    }
  },

  "firstMessageDynamic": {
    "enabled": true,
    "timezone": "Europe/London",
    "messages": {
      "morning": "Good morning, Hampstead Renovations. This is Sarah, how may I help you today?",
      "afternoon": "Good afternoon, Hampstead Renovations. This is Sarah, how may I help you today?",
      "evening": "Good evening, Hampstead Renovations. This is Sarah, how may I help you today?",
      "afterHours": "Good evening, you've reached Hampstead Renovations. Our office is currently closed, but I'm Sarah, Ross's assistant, and I can still help you. What can I do for you?",
      "weekend": "Hello, Hampstead Renovations. This is Sarah. We're on reduced hours today, but I'm here to help. How can I assist you?",
      "bankHoliday": "Hello, Hampstead Renovations. This is Sarah. We're closed for the bank holiday, but I can take your details and Ross will call you first thing when we're back."
    }
  },
  
  "silenceTimeoutSeconds": 25,
  "maxDurationSeconds": 600,
  "backgroundSound": "off",
  "backchannelingEnabled": true,
  "backgroundDenoisingEnabled": true,

  "startSpeakingPlan": {
    "waitSeconds": 0.25,
    "smartEndpointingEnabled": true,
    "customEndpointingRules": [
      {"type": "transcriptEndpointing", "timeoutSeconds": 0.35, "regex": "\\d{10,11}$", "description": "phone_complete"},
      {"type": "transcriptEndpointing", "timeoutSeconds": 0.3, "regex": "(yes|no|yeah|yep|nope|ok|okay|sure|right|fine|correct|that's right|ta|cheers)$", "description": "confirmation"},
      {"type": "transcriptEndpointing", "timeoutSeconds": 0.45, "regex": "(NW[0-9]{1,2}|N[0-9]{1,2}|[A-Z]{1,2}[0-9]+\\s?[0-9][A-Z]{2})$", "description": "postcode"},
      {"type": "transcriptEndpointing", "timeoutSeconds": 0.25, "regex": "(emergency|urgent|help|flooding|burst|leak)$", "description": "urgency"}
    ]
  },

  "stopSpeakingPlan": {
    "numWords": 1,
    "voiceSeconds": 0.15,
    "backoffSeconds": 0.7
  },

  "transportConfigurations": [
    {
      "provider": "twilio",
      "timeout": 60,
      "record": true,
      "recordingChannels": "dual"
    }
  ],

  "serverUrl": "https://hook.eu1.make.com/YOUR_WEBHOOK_ID_HERE",
  "serverUrlSecret": "YOUR_SECRET_HERE",
  
  "endCallFunctionEnabled": true,
  "endCallMessage": "Thank you so much for calling Hampstead Renovations. Have a lovely day. Goodbye!",
  "recordingEnabled": true,

  "callerRecognition": {
    "enabled": true,
    "method": "phone_lookup",
    "database": "supabase",
    "onRecognized": {
      "greeting": "Good {{timeOfDay}}, Hampstead Renovations... Oh, hello {{stored_name}}! Lovely to hear from you again. How can I help you today?",
      "prefillFields": ["caller_name", "address", "postcode"],
      "flagAsReturning": true,
      "priorityBoost": 15
    }
  },

  "smsIntegration": {
    "enabled": true,
    "provider": "twilio",
    "region": "uk",
    "senderId": "Hampstead",
    "templates": {
      "callConfirmation": {
        "id": "call_confirmation_v1",
        "body": "Hi {{name}}, thanks for calling Hampstead Renovations! Ross will call you back {{callback_time}}. If urgent, reply URGENT. - Sarah"
      },
      "emergencyConfirmation": {
        "id": "emergency_confirmation_v1",
        "body": "Hi {{name}}, we've received your urgent request. Ross will call within 15 mins. If life-threatening, call 999. - Hampstead Renovations"
      },
      "afterHoursConfirmation": {
        "id": "after_hours_v1",
        "body": "Hi {{name}}, thanks for calling Hampstead Renovations. As it's outside office hours, Ross will call you first thing {{next_business_day}}. - Sarah"
      },
      "appointmentReminder": {
        "id": "appointment_reminder_v1",
        "body": "Hi {{name}}, reminder: Ross from Hampstead Renovations is visiting {{address}} on {{date}} at {{time}}. Reply to reschedule."
      }
    },
    "gdprCompliance": {
      "optInRequired": false,
      "optOutKeyword": "STOP",
      "optOutMessage": "You've been unsubscribed from Hampstead Renovations SMS. Call us anytime on {{phone}}.",
      "dataRetentionDays": 730
    }
  },

  "appointmentBooking": {
    "enabled": true,
    "provider": "google_calendar",
    "calendarId": "{{ROSS_CALENDAR_ID}}",
    "timezone": "Europe/London",
    "slotDuration": 60,
    "bufferTime": 30,
    "availableHours": {
      "monday": {"start": "09:00", "end": "17:00"},
      "tuesday": {"start": "09:00", "end": "17:00"},
      "wednesday": {"start": "09:00", "end": "17:00"},
      "thursday": {"start": "09:00", "end": "17:00"},
      "friday": {"start": "09:00", "end": "16:00"},
      "saturday": "unavailable",
      "sunday": "unavailable"
    },
    "serviceAreas": {
      "NW3": {"travelTime": 0, "priority": "high"},
      "NW6": {"travelTime": 10, "priority": "high"},
      "NW8": {"travelTime": 15, "priority": "high"},
      "NW11": {"travelTime": 20, "priority": "medium"},
      "N2": {"travelTime": 20, "priority": "medium"},
      "N6": {"travelTime": 15, "priority": "medium"},
      "NW1": {"travelTime": 15, "priority": "medium"},
      "NW2": {"travelTime": 15, "priority": "medium"},
      "NW5": {"travelTime": 10, "priority": "medium"}
    },
    "bookingScript": "Ross has some availability this week. Would you like me to pencil in a time for him to come and have a look?"
  },

  "outboundFollowUp": {
    "enabled": true,
    "triggers": [
      {
        "name": "missed_callback",
        "condition": "callback_attempted >= 2 AND status = 'no_answer'",
        "delay": "24_hours",
        "action": "schedule_outbound_call"
      },
      {
        "name": "quote_followup",
        "condition": "status = 'quoted' AND days_since_quote >= 3",
        "delay": "3_days",
        "action": "schedule_followup_sms"
      },
      {
        "name": "cold_lead_reengagement",
        "condition": "status = 'new' AND days_since_contact >= 7",
        "delay": "7_days",
        "action": "schedule_reengagement_sms"
      }
    ],
    "outboundCallConfig": {
      "maxAttempts": 3,
      "timeBetweenAttempts": "4_hours",
      "callWindow": {"start": "10:00", "end": "19:00"},
      "script": "Hello, this is Sarah calling from Hampstead Renovations. I'm just following up on your enquiry about {{project_type}}. Is now a good time for Ross to have a quick chat?"
    }
  },

  "analysisPlan": {
    "summaryPrompt": "Write a natural one-sentence summary: [Name] from [area] called about [their need]. Include urgency, emotion, and any special requirements. Use British English.",
    "summaryRequestTimeoutSeconds": 12,
    
    "structuredDataPrompt": "Extract all information. Score lead 0-100 based on: project_value(35%), timeline_urgency(20%), location_premium(20%), caller_engagement(15%), data_completeness(10%). Assess conversation quality and caller emotion.",
    "structuredDataRequestTimeoutSeconds": 12,
    "structuredDataSchema": {
      "type": "object",
      "properties": {
        "caller_name": {"type": "string"},
        "phone_number": {"type": "string", "pattern": "^(\\+44|0)[0-9]{10,11}$"},
        "phone_confirmed": {"type": "boolean"},
        "address": {"type": "string"},
        "postcode": {"type": "string"},
        "project_type": {"type": "string"},
        "project_scope": {"type": "string", "enum": ["minor", "small", "medium", "large", "major"]},
        "project_description": {"type": "string"},
        "urgency_level": {"type": "integer", "minimum": 1, "maximum": 5},
        "caller_emotion": {"type": "string"},
        "estimated_value": {"type": "string"},
        "lead_score": {"type": "integer", "minimum": 0, "maximum": 100},
        "is_spam": {"type": "boolean"},
        "is_returning_client": {"type": "boolean"},
        "is_after_hours": {"type": "boolean"},
        "language_detected": {"type": "string"},
        "sms_consent": {"type": "boolean"},
        "appointment_interest": {"type": "boolean"},
        "call_quality_score": {"type": "integer", "minimum": 1, "maximum": 10},
        "empathy_score": {"type": "integer", "minimum": 1, "maximum": 10},
        "recommended_followup": {"type": "string"},
        "special_notes": {"type": "string"}
      },
      "required": ["caller_name", "phone_number", "phone_confirmed", "project_type", "lead_score"]
    },
    
    "successEvaluationPrompt": "Score the call 1-10 on: greeting, listening, empathy, data collection, phone confirmation, expectations set, natural tone, pacing, name usage, closing. Note any issues. Use British standards of politeness.",
    "successEvaluationRubric": "NumericScale"
  },

  "ukCompliance": {
    "gdpr": {
      "enabled": true,
      "dataRetentionDays": 730,
      "rightToErasure": true,
      "dataPortability": true,
      "privacyNoticeUrl": "https://hampsteadrenovations.co.uk/privacy"
    },
    "ico": {
      "dpaRegistration": true,
      "registrationNumber": "{{ICO_REGISTRATION_NUMBER}}"
    },
    "telephonePreference": {
      "tpsCheckEnabled": true,
      "tpsApiKey": "{{TPS_API_KEY}}"
    },
    "tradingStandards": {
      "cancellationRightsInfo": true,
      "clearPricing": true
    },
    "ofcom": {
      "cliPresentation": true,
      "silentCallRules": true,
      "answeringMachineDetection": false
    }
  },

  "metadata": {
    "business": "Hampstead Renovations",
    "legalName": "Hampstead Renovations Ltd",
    "companyNumber": "{{COMPANY_NUMBER}}",
    "vatNumber": "{{VAT_NUMBER}}",
    "location": "250 Finchley Road, London NW3",
    "director": "Ross",
    "directorMobile": "+447459345456",
    "officePhone": "+442071234567",
    "website": "https://hampsteadrenovations.co.uk",
    "email": "info@hampsteadrenovations.co.uk",
    "serviceAreas": ["NW3", "NW6", "NW8", "NW11", "N2", "N6", "NW1", "NW2", "NW5", "N19"],
    "version": "5.0.0",
    "codename": "COMPLETE",
    "lastUpdated": "2025-11-30",
    "features": [
      "SMS confirmation to callers",
      "After-hours handling with UK bank holidays",
      "WhatsApp two-way actions",
      "Appointment booking via Google Calendar",
      "Multi-language detection (Polish, Spanish)",
      "Outbound follow-up automation",
      "Full UK compliance (GDPR, ICO, TPS, Ofcom)",
      "British English throughout",
      "UK date/currency/phone formats"
    ]
  }
}
