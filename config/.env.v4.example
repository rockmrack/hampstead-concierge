# ============================================
# HAMPSTEAD CONCIERGE v4.0 ULTRA
# Environment Configuration
# ============================================

# --------------------------------------------
# CORE SETTINGS
# --------------------------------------------
VERSION=4.0.0
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=info

# --------------------------------------------
# PERFORMANCE TARGETS (v4 ULTRA)
# --------------------------------------------
TARGET_FIRST_RESPONSE_MS=150
TARGET_TURN_TAKING_MS=100
TARGET_FUNCTION_TIMEOUT_MS=5000
TARGET_WEBHOOK_RESPONSE_MS=50
TARGET_CALL_DURATION_S=120
TARGET_DATA_COMPLETENESS=0.9

# --------------------------------------------
# VAPI CONFIGURATION
# --------------------------------------------
VAPI_API_KEY=your_vapi_api_key
VAPI_ASSISTANT_ID=your_assistant_id
VAPI_PHONE_NUMBER_ID=your_phone_number_id
VAPI_SERVER_URL=https://hook.eu1.make.com/YOUR_WEBHOOK_ID
VAPI_SERVER_SECRET=your_webhook_secret
VAPI_REGION=eu-west-1

# v4 Optimizations
VAPI_SEMANTIC_CACHING=true
VAPI_NUM_FAST_TURNS=5
VAPI_EMOTION_RECOGNITION=true
VAPI_CONTEXT_COMPRESSION=true
VAPI_INTENT_CLASSIFIER=true
VAPI_ENTITY_EXTRACTOR=true
VAPI_RESPONSE_PREDICTOR=true

# --------------------------------------------
# OPENAI CONFIGURATION
# --------------------------------------------
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o-mini
OPENAI_FALLBACK_MODELS=gpt-4o,gpt-3.5-turbo
OPENAI_TEMPERATURE=0.3
OPENAI_MAX_TOKENS=150
OPENAI_TOP_P=0.9

# --------------------------------------------
# ELEVENLABS CONFIGURATION
# --------------------------------------------
ELEVENLABS_API_KEY=your_elevenlabs_api_key
ELEVENLABS_VOICE_ID=EXAVITQu4vr4xnSDxMaL
ELEVENLABS_MODEL=eleven_flash_v2_5
ELEVENLABS_STABILITY=0.42
ELEVENLABS_SIMILARITY=0.82
ELEVENLABS_OPTIMIZE_LATENCY=4

# v4 Voice Settings
ELEVENLABS_CHUNK_MIN_CHARS=8
ELEVENLABS_SSML_ENABLED=true
ELEVENLABS_FALLBACK_PROVIDERS=deepgram,cartesia,playht

# --------------------------------------------
# DEEPGRAM CONFIGURATION
# --------------------------------------------
DEEPGRAM_API_KEY=your_deepgram_api_key
DEEPGRAM_MODEL=nova-2
DEEPGRAM_LANGUAGE=en-GB
DEEPGRAM_ENDPOINTING=250
DEEPGRAM_UTTERANCE_END_MS=800
DEEPGRAM_WORD_BOOST=true
DEEPGRAM_CUSTOM_VOCAB=true

# --------------------------------------------
# TWILIO CONFIGURATION
# --------------------------------------------
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+442081234567
TWILIO_SIP_TRUNK_ID=your_sip_trunk_id

# --------------------------------------------
# MAKE.COM WEBHOOKS
# --------------------------------------------
MAKE_LEAD_WEBHOOK=https://hook.eu1.make.com/YOUR_LEAD_WEBHOOK
MAKE_SPAM_WEBHOOK=https://hook.eu1.make.com/YOUR_SPAM_WEBHOOK
MAKE_LOOKUP_WEBHOOK=https://hook.eu1.make.com/YOUR_LOOKUP_WEBHOOK
MAKE_ANALYTICS_WEBHOOK=https://hook.eu1.make.com/YOUR_ANALYTICS_WEBHOOK
MAKE_ERROR_WEBHOOK=https://hook.eu1.make.com/YOUR_ERROR_WEBHOOK
MAKE_HEALTH_WEBHOOK=https://hook.eu1.make.com/YOUR_HEALTH_WEBHOOK
MAKE_DEAD_LETTER_WEBHOOK=https://hook.eu1.make.com/YOUR_DEAD_LETTER_WEBHOOK

# v4 Webhook Settings
WEBHOOK_RESPONSE_TIMEOUT_MS=50
WEBHOOK_RATE_LIMIT_PER_SECOND=10
WEBHOOK_RATE_LIMIT_PER_MINUTE=100

# --------------------------------------------
# WHATSAPP BUSINESS API
# --------------------------------------------
WHATSAPP_PHONE_ID=your_phone_number_id
WHATSAPP_ACCESS_TOKEN=your_access_token
WHATSAPP_BUSINESS_ID=your_business_id
WHATSAPP_ROSS_NUMBER=447459345456

# v4 WhatsApp Settings
WHATSAPP_USE_TEMPLATES=true
WHATSAPP_TEMPLATE_CRITICAL=lead_critical_v4
WHATSAPP_TEMPLATE_HIGH=lead_high_v4
WHATSAPP_TEMPLATE_STANDARD=lead_standard_v4
WHATSAPP_RATE_LIMIT_MINUTE=30
WHATSAPP_RATE_LIMIT_HOUR=250

# --------------------------------------------
# SUPABASE DATABASE
# --------------------------------------------
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_anon_key
SUPABASE_SERVICE_KEY=your_service_key
SUPABASE_LEADS_TABLE=leads
SUPABASE_CLIENTS_TABLE=clients
SUPABASE_BLOCKED_TABLE=blocked_numbers

# --------------------------------------------
# EMAIL (SENDGRID)
# --------------------------------------------
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=sarah@hampsteadrenovations.com
SENDGRID_FROM_NAME=Sarah - Hampstead Renovations
SENDGRID_TEMPLATE_CRITICAL=your_critical_template_id

EMAIL_ROSS=ross@hampsteadrenovations.com
EMAIL_OFFICE=office@hampsteadrenovations.com

# --------------------------------------------
# CRM INTEGRATION
# --------------------------------------------
CRM_ENABLED=true
CRM_WEBHOOK=https://your-crm-webhook-url
CRM_TOKEN=your_crm_api_token
CRM_SYNC_THRESHOLD=50

# --------------------------------------------
# ANALYTICS
# --------------------------------------------
ANALYTICS_ENABLED=true
ANALYTICS_PROVIDER=custom
ANALYTICS_RETENTION_DAYS=90

# --------------------------------------------
# MONITORING & ALERTING
# --------------------------------------------
MONITORING_ENABLED=true
HEALTH_CHECK_INTERVAL_S=60
ALERT_LATENCY_THRESHOLD_MS=3000
ALERT_ERROR_RATE_THRESHOLD=0.05

SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR_WEBHOOK
PAGERDUTY_KEY=your_pagerduty_key

# --------------------------------------------
# ERROR HANDLING
# --------------------------------------------
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000

RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY_MS=500
RETRY_MAX_DELAY_MS=10000

# --------------------------------------------
# DEDUPLICATION
# --------------------------------------------
DEDUP_ENABLED=true
DEDUP_WINDOW_MINUTES=3
DEDUP_STRATEGY=merge_latest

# --------------------------------------------
# RATE LIMITING
# --------------------------------------------
RATE_LIMIT_GLOBAL_PER_SECOND=50
RATE_LIMIT_GLOBAL_PER_MINUTE=500

# --------------------------------------------
# BUSINESS SETTINGS
# --------------------------------------------
BUSINESS_NAME=Hampstead Renovations
BUSINESS_ADDRESS=250 Finchley Road, London
BUSINESS_PHONE=+447459345456
BUSINESS_DIRECTOR=Ross
SERVICE_AREAS=NW3,NW6,NW8,NW11,N2,N6,NW1,NW2,NW5
PREMIUM_POSTCODES=NW3,NW8
DASHBOARD_URL=https://dashboard.hampsteadrenovations.com

# --------------------------------------------
# LEAD SCORING WEIGHTS (ML Model)
# --------------------------------------------
SCORE_WEIGHT_PROJECT=0.25
SCORE_WEIGHT_VALUE=0.25
SCORE_WEIGHT_POSTCODE=0.15
SCORE_WEIGHT_URGENCY=0.15
SCORE_WEIGHT_SENTIMENT=0.10
SCORE_WEIGHT_RETURNING=0.10

# Score Thresholds
THRESHOLD_CRITICAL=90
THRESHOLD_HIGH=70
THRESHOLD_MEDIUM=50
THRESHOLD_STANDARD=30

# --------------------------------------------
# FEATURE FLAGS (v4 ULTRA)
# --------------------------------------------
FEATURE_PREDICTIVE_RESPONSES=true
FEATURE_CONTEXT_COMPRESSION=true
FEATURE_INTENT_CLASSIFICATION=true
FEATURE_ENTITY_EXTRACTION=true
FEATURE_CALLER_RECOGNITION=true
FEATURE_ML_LEAD_SCORING=true
FEATURE_CONVERSATION_STATE=true
FEATURE_SSML_PROSODY=true
FEATURE_CIRCUIT_BREAKER=true
FEATURE_CRM_SYNC=true
FEATURE_ANALYTICS=true
